<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Monitoring BerkasPlus</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- FAVICON -->
  <link rel="icon" href="icons/ATR1.ico" type="image/x-icon">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Custom CSS -->
  <link rel="stylesheet" href="css/style.css">

  <!-- JS (URUTAN PENTING) -->
  <script src="js/router.js" defer></script>
  <script src="js/auth.js" defer></script>
</head>

<body class="h-screen overflow-hidden bg-gray-100">

<div class="flex h-full">

  <!-- ================= SIDEBAR ================= -->
  <aside class="sidebar" id="sidebar">

    <!-- HEADER -->
    <div class="sidebar-header flex items-center gap-3">
      <img src="icons/ATR1(2).png" alt="ATR Logo" class="w-8 h-8 object-contain">
      <div class="leading-tight">
        <div class="sidebar-title">ATR/BPN</div>
        <div class="sidebar-subtitle">KANTAH GUNUNGKIDUL</div>
      </div>
    </div>

    <!-- MENU -->
    <nav class="sidebar-menu">

      <!-- DASHBOARD -->
      <button class="menu active"
              data-tooltip="Dashboard"
              onclick="loadPage('dashboard.html')">
        <img src="icons/dashboard.svg">
        <span class="menu-text">Dashboard</span>
      </button>

      <!-- ================= BERKAS ================= -->
      <div class="menu-group">
        <button class="menu has-submenu"
                data-tooltip="Berkas"
                onclick="toggleSubmenu(this)">
          <img src="icons/book-open.svg">
          <span class="menu-text">Berkas</span>
          <span class="submenu-arrow">❯</span>
        </button>

        <div class="submenu">
          <button class="submenu-item"
                  onclick="loadPage('informasi-berkas.html')">
            <img src="icons/info.svg">
            <span>Informasi Berkas</span>
          </button>

          <button class="submenu-item"
                  onclick="loadPage('entry-data-berkas.html')">
            <img src="icons/edit.svg">
            <span>Entry Data Berkas</span>
          </button>
        </div>
      </div>

      <!-- ================= APLIKASI ================= -->
      <div class="menu-group">
        <button class="menu has-submenu"
                data-tooltip="Aplikasi"
                onclick="toggleSubmenu(this)">
          <img src="icons/send-1.svg">
          <span class="menu-text">Aplikasi</span>
          <span class="submenu-arrow">❯</span>
        </button>

        <div class="submenu">
          <button
            class="submenu-item flex justify-between items-center"
            onclick="loadPage('inbox.html')">       
            <div class="flex items-center gap-2">
              <img src="icons/inbox.svg">
              <span>Inbox</span>
            </div>       
            <!-- BADGE JUMLAH INBOX -->
            <span
              id="inbox-badge"
              class="bg-red-600 text-white text-xs px-2 py-0.5 rounded-full">
              2
            </span>       
          </button>
        
          <button class="submenu-item"
                  onclick="loadPage('kirim-berkas.html')">
            <img src="icons/send.svg">
            <span>Kirim Berkas</span>
          </button>

          <button class="submenu-item"
                  onclick="loadPage('history-berkas.html')">
            <img src="icons/history.svg">
            <span>History Berkas</span>
          </button>
        </div>
      </div>

      <!-- ================= BERKASKU ================= -->
      <div class="menu-group">
        <button class="menu has-submenu"
                data-tooltip="BerkasKu"
                onclick="toggleSubmenu(this)">
          <img src="icons/link-2.svg">
          <span class="menu-text">BerkasKU</span>
          <span class="submenu-arrow">❯</span>
        </button>

        <div class="submenu">
          <button class="submenu-item"
                  onclick="loadPage('beban-petugas.html')">
            <img src="icons/folder.svg">
            <span>Beban Petugas</span>
          </button>

          <button class="submenu-item"
                  onclick="loadPage('beban-petugas-ukur.html')">
            <img src="icons/folder-plus.svg">
            <span>Beban Petugas Ukur</span>
          </button>
        </div>
      </div>

      <!-- ================= PLOTING ================= -->
      <div class="menu-group">
        <button class="menu has-submenu"
                data-tooltip="Ploting"
                onclick="toggleSubmenu(this)">
          <img src="icons/map.svg">
          <span class="menu-text">Ploting SiGundul</span>
          <span class="submenu-arrow">❯</span>
        </button>

        <div class="submenu">
          <button class="submenu-item"
                  onclick="loadPage('ploting.html')">
            <img src="icons/map-pin.svg">
            <span>Ploting</span>
          </button>

          <button class="submenu-item"
                  onclick="loadPage('data-ploting.html')">
            <img src="icons/layers.svg">
            <span>Data Ploting</span>
          </button>
        </div>
      </div>

      <!-- ================= TOOLS ================= -->
      <div class="menu-group">
        <button class="menu has-submenu"
                data-tooltip="Tools"
                onclick="toggleSubmenu(this)">
          <img src="icons/tools.svg">
          <span class="menu-text">Tools</span>
          <span class="submenu-arrow">❯</span>
        </button>

        <div class="submenu">
          <button class="submenu-item"
                  onclick="loadPage('daftar-petugas.html')">
            <img src="icons/user.svg">
            <span>Daftar Petugas</span>
          </button>

          <button class="submenu-item"
                  onclick="loadPage('petugas-ukur.html')">
            <img src="icons/user-plus.svg">
            <span>Daftar Petugas Ukur</span>
          </button>

          <button class="submenu-item"
                  onclick="loadPage('jenis-permohonan.html')">
            <img src="icons/list.svg">
            <span>Jenis Permohonan</span>
          </button>

          <button class="submenu-item"
                  onclick="loadPage('daftar-berkas.html')">
            <img src="icons/copy.svg">
            <span>Daftar Berkas</span>
          </button>
        </div>
      </div>

    </nav>
  </aside>

  <!-- ================= MAIN ================= -->
  <main class="flex-1 flex flex-col">

    <!-- TOPBAR -->
    <header class="topbar">
      <div class="flex items-center gap-3">
        <button onclick="toggleSidebar()" class="toggle-btn">☰</button>
        <h1 id="page-title">Dashboard</h1>
      </div>

      <div class="flex items-center gap-4 text-sm">

        <div class="relative group">
          <button onclick="Inbox()"
                  class="p-2 rounded-md hover:bg-red-50 transition">
            <img src="icons/bell.svg" class="w-5 h-5"
                 style="filter: invert(32%) sepia(87%) saturate(746%) hue-rotate(340deg);">
          </button>
          <div class="absolute right-0 mt-2 px-3 py-1 text-xs text-white
                      bg-gray-800 rounded shadow
                      opacity-0 invisible group-hover:opacity-100
                      group-hover:visible transition">
            Inbox
          </div>
        </div>

 
 <!-- USER DROPDOWN (LOGOUT ONLY) -->
        <div class="relative" id="userDropdown">

          <!-- TOGGLE -->
          <button onclick="toggleUserMenu()"
                  class="flex items-center gap-2 px-3 py-2 rounded-md
                        hover:bg-gray-100 transition">
            <img src="icons/user.svg" class="w-4 h-4">
            <span id="user-name" class="text-sm">User</span>
            <svg class="w-3 h-3 text-gray-500" fill="none" stroke="currentColor"
                viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round"
                    stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </button>

          <!-- DROPDOWN -->
          <div id="userMenu"
              class="hidden absolute right-0 mt-2 w-40
                      bg-white border rounded-md shadow-lg
                      text-sm z-50">

            <button onclick="logout()"
                    class="w-full px-4 py-2 text-left
                          text-red-600 hover:bg-red-50">
              ⎋ Log Out
            </button>

          </div>
        </div>
    </header>

    <!-- CONTENT -->
    <section id="content" class="flex-1 p-6 overflow-y-auto"></section>

    <!-- ================= UNIVERSAL MODAL ================= -->
    <div id="app-modal"
         class="fixed inset-0 bg-black/40 hidden z-50
                flex items-center justify-center">

      <div class="bg-white rounded-xl w-full max-w-sm p-6 shadow-lg">
        <h2 id="modal-title" class="text-lg font-semibold mb-2"></h2>
        <p id="modal-message" class="text-sm text-gray-600 mb-6"></p>
        <div id="modal-actions" class="flex justify-end gap-2"></div>
      </div>
    </div>

  </main>
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    loadPage("dashboard.html");
  });
</script>


</body>
</html>
